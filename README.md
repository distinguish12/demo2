# åœ¨çº¿å­¦ä¹ å¹³å°ç³»ç»Ÿ

## ğŸ“– é¡¹ç›®ç®€ä»‹

è¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„åœ¨çº¿å­¦ä¹ å¹³å°ç³»ç»Ÿï¼Œé‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¶æ„ï¼ŒåŒ…å«ç”¨æˆ·ç®¡ç†ã€è¯¾ç¨‹ç®¡ç†ã€å­¦ä¹ åŠŸèƒ½ã€è€ƒè¯•ç³»ç»Ÿã€ç¤¾åŒºäº¤æµç­‰å®Œæ•´çš„åœ¨çº¿æ•™è‚²åŠŸèƒ½ã€‚

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### åç«¯æŠ€æœ¯æ ˆ
- **æ¡†æ¶**: Spring Boot 2.7.18
- **ORM**: MyBatis-Plus 3.5.3.1
- **æ•°æ®åº“**: MySQL 8.0
- **ç¼“å­˜**: Redis
- **è®¤è¯**: JWT
- **æ–‡æ¡£**: Swagger 2.9.2
- **å­˜å‚¨**: é˜¿é‡Œäº‘OSS (å¯é€‰)

### å¼€å‘ç¯å¢ƒè¦æ±‚
- JDK 8+
- MySQL 8.0+
- Redis (å¯é€‰)
- Maven 3.6+

## ğŸ“‹ åŠŸèƒ½æ¨¡å—

### 1. ç”¨æˆ·è®¤è¯æ¨¡å— (Auth)
- ç”¨æˆ·æ³¨å†Œå’Œç™»å½•
- JWT Tokenç®¡ç†
- å¯†ç åŠ å¯†å­˜å‚¨
- ç™»å‡ºåŠŸèƒ½

### 2. ç”¨æˆ·ç®¡ç†æ¨¡å— (User)
- ç”¨æˆ·ä¿¡æ¯ç®¡ç†
- å¯†ç ä¿®æ”¹
- ç”¨æˆ·çŠ¶æ€æ§åˆ¶

### 3. è¯¾ç¨‹ç®¡ç†æ¨¡å— (Course)
- è¯¾ç¨‹CRUDæ“ä½œ
- è¯¾ç¨‹åˆ†ç±»ç®¡ç†
- ç« èŠ‚å’Œè¯¾æ—¶ç®¡ç†
- è¯¾ç¨‹å‘å¸ƒ/ä¸‹æ¶

### 4. å­¦ä¹ æ¨¡å— (Learning)
- è¯¾ç¨‹é€‰ä¿®/é€€é€‰
- å­¦ä¹ è¿›åº¦è·Ÿè¸ª
- å­¦ä¹ è®°å½•ç»Ÿè®¡
- æ–­ç‚¹ç»­æ’­åŠŸèƒ½

### 5. ç»ƒä¹ ä½œä¸šæ¨¡å— (Exercise)
- ç»ƒä¹ é¢˜ç®¡ç† (å•é€‰/å¤šé€‰/åˆ¤æ–­/å¡«ç©º)
- è‡ªåŠ¨è¯„åˆ†ç³»ç»Ÿ
- ç»ƒä¹ è®°å½•ç®¡ç†
- ç»ƒä¹ ç»Ÿè®¡åˆ†æ

### 6. è€ƒè¯•æ¨¡å— (Exam)
- åœ¨çº¿è€ƒè¯•ç³»ç»Ÿ
- è€ƒè¯•æ—¶é—´æ§åˆ¶
- è‡ªåŠ¨è¯„åˆ†åŠŸèƒ½
- è€ƒè¯•ç»Ÿè®¡åˆ†æ

### 7. è®¨è®ºåŒºæ¨¡å— (Discussion)
- è¯¾ç¨‹è®¨è®ºå‘å¸–
- å›å¤å’Œç‚¹èµåŠŸèƒ½
- çƒ­é—¨å†…å®¹æ¨è
- è®¨è®ºåŒºç®¡ç†

### 8. è¯„ä»·åé¦ˆæ¨¡å— (Review)
- è¯¾ç¨‹è¯„ä»·ç³»ç»Ÿ
- æ˜Ÿçº§è¯„åˆ†åŠŸèƒ½
- è¯„ä»·ç»Ÿè®¡åˆ†æ
- è¯„ä»·ç®¡ç†æ§åˆ¶

### 9. æ–‡ä»¶æœåŠ¡æ¨¡å— (File)
- æ–‡ä»¶ä¸Šä¼ ä¸‹è½½
- å¤šæ–‡ä»¶ç±»å‹æ”¯æŒ
- æœ¬åœ°/OSSåŒå­˜å‚¨
- æ–‡ä»¶åˆ†ç±»ç®¡ç†

### 10. ç³»ç»Ÿç®¡ç†æ¨¡å— (System)
- RBACæƒé™ç®¡ç†
- æ“ä½œæ—¥å¿—è®°å½•
- æ•°æ®ç»Ÿè®¡åˆ†æ
- ç”¨æˆ·è§’è‰²åˆ†é…

## ğŸ”— æ ¸å¿ƒAPIæ¥å£

### å¥åº·æ£€æŸ¥æ¥å£
```
GET    /api/health            # åŸºç¡€å¥åº·æ£€æŸ¥
GET    /api/health/detail     # è¯¦ç»†å¥åº·çŠ¶æ€ï¼ˆJVMã€ç³»ç»Ÿä¿¡æ¯ï¼‰
GET    /api/health/ready      # å°±ç»ªæ£€æŸ¥ï¼ˆK8så°±ç»ªæ¢é’ˆï¼‰
GET    /api/health/liveness   # å­˜æ´»æ£€æŸ¥ï¼ˆK8så­˜æ´»æ¢é’ˆï¼‰
```

### ç”¨æˆ·è®¤è¯æ¥å£
```
POST   /api/auth/login         # ç”¨æˆ·ç™»å½•
POST   /api/auth/register      # ç”¨æˆ·æ³¨å†Œ
POST   /api/auth/logout        # ç”¨æˆ·ç™»å‡º
GET    /api/auth/info          # è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯
POST   /api/auth/refresh       # åˆ·æ–°Token
```

### è¯¾ç¨‹ç®¡ç†æ¥å£
```
GET    /api/courses            # è·å–è¯¾ç¨‹åˆ—è¡¨
POST   /api/courses            # åˆ›å»ºè¯¾ç¨‹
GET    /api/courses/{id}       # è·å–è¯¾ç¨‹è¯¦æƒ…
PUT    /api/courses/{id}       # æ›´æ–°è¯¾ç¨‹
DELETE /api/courses/{id}       # åˆ é™¤è¯¾ç¨‹
PUT    /api/courses/{id}/publish   # å‘å¸ƒè¯¾ç¨‹
PUT    /api/courses/{id}/unpublish # ä¸‹æ¶è¯¾ç¨‹
GET    /api/courses/hot        # è·å–çƒ­é—¨è¯¾ç¨‹
GET    /api/courses/search     # æœç´¢è¯¾ç¨‹
```

### ç« èŠ‚è¯¾æ—¶ç®¡ç†æ¥å£
```
GET    /api/courses/{courseId}/chapters     # è·å–ç« èŠ‚åˆ—è¡¨
POST   /api/courses/{courseId}/chapters     # åˆ›å»ºç« èŠ‚
PUT    /api/courses/{courseId}/chapters/{chapterId}   # æ›´æ–°ç« èŠ‚
DELETE /api/courses/{courseId}/chapters/{chapterId}   # åˆ é™¤ç« èŠ‚
GET    /api/chapters/{chapterId}/lessons    # è·å–è¯¾æ—¶åˆ—è¡¨
POST   /api/chapters/{chapterId}/lessons    # åˆ›å»ºè¯¾æ—¶
PUT    /api/chapters/{chapterId}/lessons/{lessonId}   # æ›´æ–°è¯¾æ—¶
DELETE /api/chapters/{chapterId}/lessons/{lessonId}   # åˆ é™¤è¯¾æ—¶
```

### å­¦ä¹ åŠŸèƒ½æ¥å£
```
POST   /api/learning/enroll     # é€‰è¯¾
POST   /api/learning/unenroll   # é€€è¯¾
GET    /api/learning/my-courses # è·å–æˆ‘çš„é€‰è¯¾
GET    /api/learning/progress/{lessonId}    # è·å–å­¦ä¹ è¿›åº¦
POST   /api/learning/progress   # æ›´æ–°å­¦ä¹ è¿›åº¦
POST   /api/learning/complete/{lessonId}    # å®Œæˆè¯¾æ—¶
GET    /api/learning/stats      # è·å–å­¦ä¹ ç»Ÿè®¡
```

### ç»ƒä¹ ä½œä¸šæ¥å£
```
GET    /api/exercises/course/{courseId}     # è·å–è¯¾ç¨‹ç»ƒä¹ é¢˜
POST   /api/exercises           # åˆ›å»ºç»ƒä¹ é¢˜
PUT    /api/exercises/{id}      # æ›´æ–°ç»ƒä¹ é¢˜
DELETE /api/exercises/{id}      # åˆ é™¤ç»ƒä¹ é¢˜
POST   /api/exercises/{exerciseId}/submit   # æäº¤ç»ƒä¹ ç­”æ¡ˆ
GET    /api/exercises/{exerciseId}/my-submission   # è·å–æˆ‘çš„æäº¤
GET    /api/exercises/{exerciseId}/stats   # è·å–ç»ƒä¹ ç»Ÿè®¡
```

### è€ƒè¯•åŠŸèƒ½æ¥å£
```
GET    /api/exams/course/{courseId}   # è·å–è¯¾ç¨‹è€ƒè¯•
POST   /api/exams               # åˆ›å»ºè€ƒè¯•
PUT    /api/exams/{id}          # æ›´æ–°è€ƒè¯•
DELETE /api/exams/{id}          # åˆ é™¤è€ƒè¯•
POST   /api/exams/{examId}/start     # å¼€å§‹è€ƒè¯•
POST   /api/exams/{examId}/submit    # æäº¤è€ƒè¯•
GET    /api/exams/{examId}/questions # è·å–è€ƒè¯•é¢˜ç›®
GET    /api/exams/{examId}/stats     # è·å–è€ƒè¯•ç»Ÿè®¡
GET    /api/exams/my-records    # è·å–æˆ‘çš„è€ƒè¯•è®°å½•
```

### è®¨è®ºåŒºæ¥å£
```
GET    /api/discussions/course/{courseId}   # è·å–è¯¾ç¨‹è®¨è®º
POST   /api/discussions           # å‘å¸ƒè®¨è®ºå¸–
PUT    /api/discussions/{id}      # æ›´æ–°è®¨è®ºå¸–
DELETE /api/discussions/{id}      # åˆ é™¤è®¨è®ºå¸–
GET    /api/discussions/{id}      # è·å–è®¨è®ºè¯¦æƒ…
GET    /api/discussions/course/{courseId}/hot   # è·å–çƒ­é—¨è®¨è®º
PUT    /api/discussions/{id}/toggle-top         # ç½®é¡¶/å–æ¶ˆç½®é¡¶
PUT    /api/discussions/{id}/toggle-essence     # è®¾ä¸ºç²¾å
```

### å›å¤åŠŸèƒ½æ¥å£
```
GET    /api/discussions/{discussionId}/replies    # è·å–å›å¤åˆ—è¡¨
POST   /api/discussions/{discussionId}/replies    # å‘è¡¨å›å¤
DELETE /api/discussions/{discussionId}/replies/{replyId}   # åˆ é™¤å›å¤
POST   /api/discussions/{discussionId}/replies/{replyId}/like   # ç‚¹èµå›å¤
GET    /api/discussions/{discussionId}/replies/{replyId}/likes  # è·å–ç‚¹èµæ•°
```

### è¯„ä»·åŠŸèƒ½æ¥å£
```
GET    /api/reviews/course/{courseId}      # è·å–è¯¾ç¨‹è¯„ä»·
POST   /api/reviews               # å‘è¡¨è¯„ä»·
PUT    /api/reviews/{id}          # æ›´æ–°è¯„ä»·
DELETE /api/reviews/{id}          # åˆ é™¤è¯„ä»·
GET    /api/reviews/my-reviews    # è·å–æˆ‘çš„è¯„ä»·
GET    /api/reviews/course/{courseId}/average-rating   # è·å–å¹³å‡è¯„åˆ†
GET    /api/reviews/course/{courseId}/stats            # è·å–è¯„ä»·ç»Ÿè®¡
GET    /api/reviews/course/{courseId}/has-reviewed     # æ£€æŸ¥æ˜¯å¦å·²è¯„ä»·
GET    /api/reviews/user/stats    # è·å–ç”¨æˆ·è¯„ä»·ç»Ÿè®¡
```

### æ–‡ä»¶ä¸Šä¼ æ¥å£
```
POST   /api/upload/file          # ä¸Šä¼ é€šç”¨æ–‡ä»¶
POST   /api/upload/avatar        # ä¸Šä¼ å¤´åƒ
POST   /api/upload/course-cover  # ä¸Šä¼ è¯¾ç¨‹å°é¢
POST   /api/upload/lesson-video  # ä¸Šä¼ è¯¾æ—¶è§†é¢‘
POST   /api/upload/exercise-attachment  # ä¸Šä¼ ç»ƒä¹ é™„ä»¶
GET    /api/upload/signature     # è·å–OSSä¸Šä¼ ç­¾å
DELETE /api/upload/file          # åˆ é™¤æ–‡ä»¶
GET    /api/upload/file-info     # è·å–æ–‡ä»¶ä¿¡æ¯
GET    /api/upload/files         # è·å–å…³è”æ–‡ä»¶åˆ—è¡¨
GET    /api/upload/file-url      # è·å–æ–‡ä»¶è®¿é—®URL
```

## âš™ï¸ é…ç½®è¯´æ˜

### 1. æ•°æ®åº“é…ç½®

åœ¨ `src/main/resources/application.yml` ä¸­é…ç½®ï¼š

```yaml
spring:
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://localhost:3306/edu_online?useUnicode=true&characterEncoding=utf-8&serverTimezone=Asia/Shanghai&useSSL=false
    username: your_username
    password: your_password
```

**éœ€è¦æ‰§è¡Œçš„SQLè„šæœ¬**ï¼šé¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ `edu_online.sql`

### 2. Redisé…ç½® (å¯é€‰)

```yaml
spring:
  redis:
    host: localhost
    port: 6379
    password: your_password  # å¦‚æœæœ‰å¯†ç 
    database: 0
```

### 3. JWTé…ç½®

```yaml
jwt:
  secret: your-secret-key  # å»ºè®®ä½¿ç”¨32ä½ä»¥ä¸Šçš„éšæœºå­—ç¬¦ä¸²
  expire: 604800000        # Tokenè¿‡æœŸæ—¶é—´ï¼Œé»˜è®¤7å¤©
  header: Authorization
  token-head: Bearer
```

### 4. OSSé…ç½® (å¯é€‰)

```yaml
oss:
  enabled: true
  provider: aliyun
  endpoint: https://oss-cn-hangzhou.aliyuncs.com
  access-key-id: your-access-key-id
  access-key-secret: your-access-key-secret
  bucket-name: your-bucket-name
  domain: https://your-bucket-name.oss-cn-hangzhou.aliyuncs.com
```

### 5. æ–‡ä»¶ä¸Šä¼ é…ç½®

```yaml
file:
  upload:
    max-size: 50MB
    local-path: uploads/
  oss:
    enabled: false  # å¦‚éœ€ä½¿ç”¨OSSï¼Œè®¾ä¸ºtrue
    expire: 3600    # æ–‡ä»¶URLè¿‡æœŸæ—¶é—´(ç§’)
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡
```bash
# 1. å®‰è£…JDK 8+
# 2. å®‰è£…MySQL 8.0+
# 3. å®‰è£…Maven 3.6+
# 4. å¯é€‰ï¼šå®‰è£…Redis
```

### 2. æ•°æ®åº“åˆå§‹åŒ–
```bash
# åˆ›å»ºæ•°æ®åº“
CREATE DATABASE edu_online CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

# æ‰§è¡ŒSQLè„šæœ¬
mysql -u username -p edu_online < edu_online.sql
```

### 3. é…ç½®ä¿®æ”¹
```bash
# ä¿®æ”¹ application.yml ä¸­çš„æ•°æ®åº“è¿æ¥ä¿¡æ¯
# å¦‚éœ€ä½¿ç”¨OSSï¼Œé…ç½®ç›¸åº”çš„OSSå‚æ•°
# ä¿®æ”¹JWT secretå¯†é’¥
```

### 4. å¯åŠ¨åº”ç”¨
```bash
# ç¼–è¯‘é¡¹ç›®
mvn clean compile

# å¯åŠ¨åº”ç”¨
mvn spring-boot:run

# æˆ–è€…æ‰“åŒ…åè¿è¡Œ
mvn clean package -DskipTests
java -jar target/edu-online-1.0.0.jar
```

### 5. è®¿é—®åº”ç”¨
- **APIæ–‡æ¡£**: http://localhost:8080/swagger-ui.html
- **åº”ç”¨æ¥å£**: http://localhost:8080/api/*

## ğŸ“Š æ•°æ®ç»Ÿè®¡æ¥å£

### ç³»ç»Ÿæ¦‚è§ˆ
```
GET /api/system/overview  # ç³»ç»Ÿæ¦‚è§ˆç»Ÿè®¡
```

### ç”¨æˆ·ç»Ÿè®¡
```
GET /api/system/user-stats  # ç”¨æˆ·ç»Ÿè®¡ä¿¡æ¯
```

### è¯¾ç¨‹ç»Ÿè®¡
```
GET /api/system/course-stats  # è¯¾ç¨‹ç»Ÿè®¡ä¿¡æ¯
```

### å­¦ä¹ ç»Ÿè®¡
```
GET /api/system/learning-stats  # å­¦ä¹ ç»Ÿè®¡ä¿¡æ¯
```

## ğŸ” æƒé™è¯´æ˜

### ç”¨æˆ·è§’è‰²
- **STUDENT (1)**: å­¦ç”Ÿï¼Œå¯ä»¥å­¦ä¹ è¯¾ç¨‹ã€å‚åŠ è€ƒè¯•ã€å‘è¡¨è¯„ä»·
- **INSTRUCTOR (2)**: è®²å¸ˆï¼Œå¯ä»¥åˆ›å»ºè¯¾ç¨‹ã€ç®¡ç†å†…å®¹
- **ADMIN (3)**: ç®¡ç†å‘˜ï¼Œæ‹¥æœ‰ç³»ç»Ÿå…¨éƒ¨æƒé™

### ä¸»è¦æƒé™
- `COURSE_VIEW`: æŸ¥çœ‹è¯¾ç¨‹
- `COURSE_MANAGE`: ç®¡ç†è¯¾ç¨‹
- `USER_MANAGE`: ç”¨æˆ·ç®¡ç†
- `SYSTEM_MANAGE`: ç³»ç»Ÿç®¡ç†

## ğŸ§ª æµ‹è¯•è¯´æ˜

é¡¹ç›®åŒ…å«å®Œæ•´çš„JUnitæµ‹è¯•ç”¨ä¾‹ï¼š

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
mvn test

# è¿è¡Œç‰¹å®šæ¨¡å—æµ‹è¯•
mvn test -Dtest=CourseModuleTest
mvn test -Dtest=LearningModuleTest
mvn test -Dtest=ExamModuleTest
```

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **æ•°æ®åº“ç¼–ç **: å¿…é¡»ä½¿ç”¨UTF-8ç¼–ç 
2. **æ—¶åŒºè®¾ç½®**: æ•°æ®åº“æ—¶åŒºè®¾ç½®ä¸ºAsia/Shanghai
3. **æ–‡ä»¶æƒé™**: uploadsç›®å½•éœ€è¦å†™æƒé™
4. **OSSé…ç½®**: ç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨OSSå­˜å‚¨
5. **Redisç¼“å­˜**: å¯é€‰é…ç½®ï¼Œæå‡ç³»ç»Ÿæ€§èƒ½

## ğŸ¤ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. æ•°æ®åº“è¿æ¥æ˜¯å¦æ­£å¸¸
2. é…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡®
3. ç«¯å£8080æ˜¯å¦è¢«å ç”¨
4. JDKç‰ˆæœ¬æ˜¯å¦ä¸º8+

## ğŸ“… æ›´æ–°æ—¥å¿—

### v1.2.0 (2026-02-26)
- æ–°å¢å¥åº·æ£€æŸ¥æ¨¡å—ï¼ˆæ”¯æŒ K8s æ¢é’ˆï¼‰
- æ·»åŠ  JVM å’Œç³»ç»Ÿ information ç›‘æ§æ¥å£
- ä¼˜åŒ–é¡¹ç›®å¯¹ JDK 8 çš„å…¼å®¹æ€§

### v1.1.0 (2026-02-10)
- æ–°å¢ç³»ç»Ÿç®¡ç†æ¨¡å—ï¼ˆRBAC æƒé™ç®¡ç†ã€æ“ä½œæ—¥å¿—ã€æ•°æ®ç»Ÿè®¡ï¼‰
- ä¼˜åŒ–è¯¾ç¨‹æœç´¢æ€§èƒ½
- ä¿®å¤å­¦ä¹ è¿›åº¦ç»Ÿè®¡ä¸å‡†ç¡®çš„é—®é¢˜
- å®Œå–„ API æ–‡æ¡£å’Œé”™è¯¯ç è¯´æ˜

### v1.0.0
- åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- å®Œæˆç”¨æˆ·è®¤è¯ã€è¯¾ç¨‹ç®¡ç†ã€å­¦ä¹ ã€è€ƒè¯•ã€è®¨è®ºã€è¯„ä»·ã€æ–‡ä»¶æœåŠ¡ç­‰æ ¸å¿ƒæ¨¡å—

## ğŸ“„ å¼€æºåè®®

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚